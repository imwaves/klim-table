{"mappings":"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","sources":["utils.js","app.js"],"sourcesContent":["export function createEl (tag, props, children) {\n  const $el = document.createElement(tag);\n  if (props)\n    Object.entries(props).forEach(([name, val]) => {\n      if (name === 'style')\n        return Object.assign($el.style, val);\n      $el[name] = val;\n    });\n\n  if (children) {\n    if (Array.isArray(children))\n      children.forEach($child => $el.append($child));\n    else if (typeof children === 'string' || typeof children === 'number')\n      $el.textContent = children;\n  }\n  return $el;\n}\n\nconst SI_PREFIX = ['', 'K', 'M', 'G', 'T', 'P', 'E', 'Z', 'Y'];\nexport function SI (int, maximumFractionDigits = 1) {\n  int = Number(int);\n  for (var i = 0, nat = int; i < SI_PREFIX.length - 1; i++) {\n    nat = int / 1000;\n    if (nat < 1)\n      break;\n    int = nat;\n  }\n  int = int < 10 ? int.toLocaleString('en-GB', { maximumFractionDigits }) : Math.round(int);\n  return `${ int }${ SI_PREFIX[i] }`;\n}\n\nexport function number (v, fract = 2) {\n  return v.toLocaleString('en-GB', { maximumFractionDigits: fract }).replace(/,/g, ' ');\n}","import { createEl, SI, number } from './utils.js';\n\nimport './Table.css';\n\nconst $input = document.querySelector('#file');\n\n$input.addEventListener('change', e => {\n  const file = $input.files[0];\n  const fileName = file.name.replace('.csv', '');\n  $root.querySelector('header span').textContent = fileName;\n  document.title = `Custom Report: ${fileName}`;\n  const reader = new FileReader();\n  $input.style.display = 'none';\n  reader.onload = () => onLoad(reader.result);\n  reader.onerror = e => alert(e);\n  reader.readAsText(file);\n});\n\nconst LINK = 0,\n  NAME = 1,\n  ICON = 2,\n  AFFINITY = 3,\n  INF_POWER = 4,\n  VIEWS = 5,\n  USERS = 6,\n  AGE = 7,\n  GENDER = 8;\n\nconst CELL_ORDER = [\n  NAME,\n  AFFINITY,\n  INF_POWER,\n  VIEWS,\n  USERS,\n  AGE,\n  GENDER,\n];\n\nconst NUMBER_CELLS = [\n  AFFINITY,\n  INF_POWER,\n  VIEWS,\n  USERS,\n];\n\nconst STAT_CELLS = [AGE, GENDER];\n\nconst $root = document.querySelector('#root');\n\nfunction onLoad (data) {\n  const lines = data.split(/\\r\\n/).map(line => {\n    return line.split(',');\n  });\n\n  const head = lines[0];\n  const rows = lines.slice(1, 101);\n\n  const $table = renderTable({ head, rows });\n  $table.classList.add('Table');\n\n  $root.append($table);\n}\n\nfunction renderTable ({ head, rows }) {\n  return createEl('table', { cellSpacing: 10 }, [\n    createEl(\n      'thead',\n      null,\n      CELL_ORDER.map(field =>\n        createEl('th', null, head[field])\n      ),\n    ),\n\n    createEl('tbody', null,\n      rows.map((row, ri) => {\n        if (!row)\n          return null;\n        return createEl('tr', null,\n          CELL_ORDER.map((field, fi) => {\n            const cell = row[field];\n\n            if (field === NAME) {\n              return createEl('td', null, [\n                createEl('div', null, [\n                  createEl('img', {\n                    src: row[ICON],\n                    lazy: 'lazy',\n                  }),\n                  createEl('span', null, cell),\n                  createEl('a', {\n                    href: row[LINK],\n                    target: '_blank',\n                  }, 'Youtube link'),\n                ])\n              ])\n            }\n\n            if (NUMBER_CELLS.includes(field)) {\n              return createEl('td', { className: '--number' }, SI(+cell))\n            }\n\n            if (STAT_CELLS.includes(field)) {\n              const stats = cell.replace(/^\"|\"$/g, '')\n                .split('\\n').map(stat => {\n                  const [ name, value ] = stat.split(' : ');\n                  return { name, value };\n                });\n\n              if (!stats?.[0].name?.length)\n                return createEl('td');\n\n              if (field === AGE) {\n                stats.sort((a, b) => {\n                  const aa = a.name.charAt(0);\n                  const bb = b.name.charAt(0);\n                  return aa < bb ? -1 : aa == bb ? 0 : 1;\n                })\n              }\n\n              return createEl('td', { className: '--stats' }, [\n                createEl('dl', null,\n                  stats.reduce((acc, stat) => {\n                      acc.push(createEl('dt', null, stat.name));\n                      acc.push(createEl('dd', null, stat.value));\n                      return acc;\n                    },\n                    [],\n                  ),\n                )\n              ]);\n            }\n\n            return createEl('td', null, cell)\n          })\n        )\n      }),\n    ),\n  ]);\n}"],"names":["$ccb550977230f660$export$3d7cd8ed57263b30","tag","props","children","$el","document","createElement","Object","entries","forEach","name","val","assign","style","Array","isArray","$child","append","textContent","$ccb550977230f660$var$SI_PREFIX","$ccb550977230f660$export$e6702cab675b095","int","maximumFractionDigits","i","nat","Number","length","toLocaleString","Math","round","$ee73b63988e0cece$var$$input","querySelector","addEventListener","e1","file","files","fileName","replace","$ee73b63988e0cece$var$$root","title","reader","FileReader","display","onload","data","lines","split","map","line","head","rows","slice","$table","cellSpacing","$ee73b63988e0cece$var$CELL_ORDER","field","row","ri","fi","cell","src","lazy","href","target","$ee73b63988e0cece$var$NUMBER_CELLS","includes","className","$ee73b63988e0cece$var$STAT_CELLS","stats","stat","value","sort","a","b","aa","charAt","bb","reduce","acc","push","$ee73b63988e0cece$var$renderTable","classList","add","$ee73b63988e0cece$var$onLoad","result","onerror","e","alert","readAsText"],"version":3,"file":"index.e934545c.js.map"}